/*
 * js-orgChart - 2.00
 * Copyright (c) 2013 - 2015 rchockxm (rchockxm.silver@gmail.com)
 * Copyright (c) 2009 Surnfu composition
 *
 * Licensed - under the terms of the MIT License
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Based on: Surnfu - Email:Surnfu@126.com - QQ:31333716
 *           2009 Surnfu composition http://www.on-cn.com
 */
function OrgNodeV2(t){this.options={targetName:"orgchart",subTargetName:"orgnode",clsName:"org-node",uniqueIDLen:14,uniqueIDT1Len:10,prefixID:"node",width:0,height:0,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,template:""},this.event={onProcess:null,onClick:null,onMouseMove:null,onMouseOver:null,onMouseOut:null},this.customParams=null,this.node={id:null,idt1:null,parent:null,groupID:0,orderID:0,instance:null,offsetWidth:0,offsetHeight:0,top:-1,left:-1,depth:0,line:{top:null,bottom:null},isInit:!1},this.nodes=[],this.ctor(t)}function OrgChartV2(t){this.consts={line:{type:{group:1,self:2}}},this.options={top:0,left:0,line:{size:0,color:""},node:{width:0,height:0,minWidth:0,minHeight:0,maxWidth:0,maxHeight:0,template:'<div id="{id}"></div>'},parentOffset:!1,expandTarget:!0},this.event={node:{onProcess:null,onClick:null,onMouseMove:null,onMouseOver:null,onMouseOut:null},onCreate:null,onError:null,onFinish:null},this.nodes=null,this.nodesDepths=[],this.depthGroup=[],this.chart={targetName:"",subTargetName:"",clsName:"",width:0,height:0,intervalWidth:100,intervalHeight:30,top:0,left:0,depth:0,line:{color:"#3388dd",size:1},total:{nodes:0,error:{setNodeLeft:0}}},this.ctor(t)}OrgNodeV2.prototype={constructor:OrgNodeV2,ctor:function(t){var e=!1;return"object"==typeof t&&null!==t&&("object"==typeof t.options&&null!==t.options&&(this.options=this.getDiffParams(this.options,t.options)),"object"==typeof t.event&&null!==t.event&&(this.event=this.getDiffParams(this.event,t.event)),"object"==typeof t.customParams&&null!==t.customParams&&(this.customParams=t.customParams),this.node.id=this.getUniqueID(this.options.uniqueIDLen,this.options.subTargetName,0),this.node.idt1=this.getUniqueID(this.options.uniqueIDT1Len,this.options.subTargetName,1),e=!0),e},render:function(t,e,o){var n={offsetWidth:0,offsetHeight:0,isInit:!1};"object"==typeof e&&null!==e&&(this.options.width=this.options.width<=0||this.options.width>e.node.width?e.node.width:this.options.width,this.options.height=this.options.height<=0||this.options.height>e.node.height?e.node.height:this.options.height,this.options.minWidth=this.options.minWidth<=0||this.options.minWidth>e.node.minWidth?e.node.minWidth:this.options.minWidth,this.options.minHeight=this.options.minHeight<=0||this.options.minHeight>e.node.minHeight?e.node.minHeight:this.options.minHeight,this.options.maxWidth=this.options.maxWidth<=0||this.options.maxWidth>e.node.maxWidth?e.node.maxWidth:this.options.maxWidth,this.options.maxHeight=this.options.maxHeight<=0||this.options.maxHeight>e.node.maxHeight?e.node.maxHeight:this.options.maxHeight,("string"!=typeof this.options.template||0==this.options.template.length)&&(this.options.template=e.node.template)),"object"==typeof o&&null!==o&&"object"==typeof o.node&&null!==o.node&&(this.event.onProcess="function"==typeof this.event.onProcess?this.event.onProcess:o.node.onProcess,this.event.onClick="function"==typeof this.event.onClick?this.event.onClick:o.node.onClick,this.event.onMouseMove="function"==typeof this.event.onMouseMove?this.event.onMouseMove:o.node.onMouseMove,this.event.onMouseOver="function"==typeof this.event.onMouseOver?this.event.onMouseOver:o.node.onMouseOver,this.event.onMouseOut="function"==typeof this.event.onMouseOut?this.event.onMouseOut:o.node.onMouseOut),"function"==typeof this.event.onProcess&&this.event.onProcess(this.node,this.nodes);var i=document.createElement("div");i.id=this.node.id,i.innerHTML="<div class='"+this.options.clsName+'\' org-custom="node-childs" style="width: 0px; height: 0px;"></div>',i.style.width=0,i.style.height=0;var s=this.options.template;if(s=s.replace("{id}",this.node.idt1),"object"==typeof this.customParams&&null!==this.customParams)for(var h in this.customParams)s=s.replace("{"+h+"}",this.customParams[h]);"object"==typeof i.firstChild&&null!==typeof i.firstChild?i.firstChild.innerHTML=s:i.innerHTML=s;var r=document.getElementById(this.options.targetName);if("object"==typeof r&&null!==r?r.appendChild(i):document.body.appendChild(i),this.node.instance=document.getElementById(this.node.idt1),"object"==typeof this.node.instance&&null!==this.node.instance){var d=this.getOffset(this.node.instance);this.options.minWidth>0&&(this.node.instance.style.minWidth=this.options.minWidth+"px"),this.options.width>0&&d.width<this.options.width&&(this.node.instance.style.width=this.options.width+"px",d=this.getOffset(this.node.instance),d.width>this.options.width&&(this.node.instance.style.width=this.options.width-parseFloat(d.width-this.options.width)+"px")),this.options.minHeight>0&&(this.node.instance.style.minHeight=this.options.minHeight+"px"),this.options.height>0&&d.height<this.options.height&&(this.node.instance.style.height=this.options.height+"px",d=this.getOffset(this.node.instance),d.height>this.options.height&&(this.node.instance.style.height=this.options.height-parseFloat(d.height-this.options.height)+"px")),d=this.getOffset(this.node.instance),this.node.offsetWidth=d.width,this.node.offsetHeight=d.height,this.node.isInit=!0,"function"==typeof this.event.onClick&&(this.node.instance.onclick=this.event.onClick),"function"==typeof this.event.onMouseMove&&(this.node.instance.onmousemove=this.event.onMouseMove),"function"==typeof this.event.onMouseOver&&(this.node.instance.onmouseover=this.event.onMouseOver),"function"==typeof this.event.onMouseOut&&(this.node.instance.onmouseout=this.event.onMouseOut),n.offsetWidth=this.node.offsetWidth,n.offsetHeight=this.node.offsetHeight,n.isInit=this.node.isInit}return n},add:{nodes:function(t){return OrgNodeV2.prototype.addNodes(t)}},addNodes:function(t){var e=!1;return"object"==typeof t&&null!==t&&"object"==typeof t.node&&null!==t.node&&(t.node.parent=this,this.nodes[this.nodes.length]=t,e=!0),e},get:{options:function(){return OrgNodeV2.prototype.getOptions()},event:function(){return OrgNodeV2.prototype.getEvent()},customParams:function(){return OrgNodeV2.prototype.getCustomParams()},offset:function(t){return OrgNodeV2.prototype.getOffset()},uniqueID:function(t,e,o){return OrgNodeV2.prototype.getUniqueID()},diffParams:function(t,e){return OrgNodeV2.prototype.getDiffParams()}},getOptions:function(){return this.options},getEvent:function(){return this.event},getCustomParams:function(){return this.customParams},getOffset:function(t){var e={x:0,y:0,width:0,height:0};if("object"==typeof t&&null!==t){e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight;for(var o=t.offsetParent;null!=o;)e.x+=o.offsetLeft,e.y+=o.offsetTop,o=o.offsetParent;"object"==typeof t.currentStyle&&null!==t.currentStyle&&(0==e.width&&(e.width+=isNaN(t.currentStyle.width===!1&&null!==t.currentStyle.width)?t.currentStyle.width:0,e.width+=isNaN(t.currentStyle.paddingRight===!1&&null!==t.currentStyle.paddingRight)?t.currentStyle.paddingRight:0,e.width+=isNaN(t.currentStyle.paddingLeft===!1&&null!==t.currentStyle.paddingLeft)?t.currentStyle.paddingLeft:0,e.width+=isNaN(t.currentStyle.borderWidth===!1&&null!==t.currentStyle.borderWidth)?2*t.currentStyle.borderWidth:0),0==e.height&&(e.height+=isNaN(t.currentStyle.height===!1&&null!==t.currentStyle.height)?t.currentStyle.height:0,e.height+=isNaN(t.currentStyle.paddingTop===!1&&null!==t.currentStyle.paddingTop)?t.currentStyle.paddingTop:0,e.height+=isNaN(t.currentStyle.paddingBottom===!1&&null!==t.currentStyle.paddingBottom)?t.currentStyle.paddingBottom:0,e.height+=isNaN(t.currentStyle.borderWidth===!1&&null!==t.currentStyle.borderWidth)?2*t.currentStyle.borderWidth:0))}return e},getUniqueID:function(t,e,o){var n="";t="number"==typeof t?parseInt(t):this.options.uniqueIDLen,e="string"==typeof e?e:this.options.prefixID,o="number"==typeof o?parseInt(o):0;for(var i={max:122,min:97},s=1;t>=s;s++){var h=parseInt(Math.floor(Math.random()*(i.max-i.min+1))+i.min);"number"!=typeof h&&(h=i.min),n+=String.fromCharCode(h)}return e+"-"+n+"-"+o},getDiffParams:function(t,e){var o=t;if("object"==typeof t&&null!==t&&"object"==typeof e&&null!==e)for(var n in e)"undefined"!=typeof t[n]&&"undefined"!=typeof e[n]&&null!==e[n]&&("number"==typeof e[n]||"boolean"==typeof e[n]||"string"==typeof e[n]||"function"==typeof e[n]?o[n]=e[n]:null!==e[n]&&(o[n]=this.getDiffParams(t[n],e[n])));return o}},OrgChartV2.prototype={constructor:OrgChartV2,ctor:function(t){var e=!1;return"object"==typeof t&&null!==t&&"object"==typeof t.nodes&&null!==t.nodes&&"function"==typeof t.nodes.getDiffParams&&(this.nodes=t.nodes,"object"==typeof t.options&&null!==t.options&&(this.options=this.nodes.getDiffParams(this.options,t.options)),"object"==typeof t.event&&null!==t.event&&(this.event=this.nodes.getDiffParams(this.event,t.event)),e=!0),e},render:function(){var t=!1;if("object"!=typeof this.nodes||null===this.nodes||"object"!=typeof this.nodes.nodes||null===typeof this.nodes.nodes)return t;this.drawNodesInit(this.nodes,this.chart,this.options,this.event),this.setDepth(this.nodes),this.setDepthHeight();var e=this.nodesDepths[0],o=document.getElementById(e.options.targetName),n=this.getElementOffsetParents("");this.options.parentOffset===!0&&(n=this.getElementOffsetParents(e.options.targetName)),this.chart.left=n.offsetLeft,this.chart.top=n.offsetTop,"object"==typeof this.options&&null!==this.options&&(this.chart.left+="number"==typeof this.options.left?this.options.left:0,this.chart.top+="number"==typeof this.options.top?this.options.top:0,this.chart.line.color="string"==typeof this.options.line.color?this.options.line.color:this.chart.line.color,this.chart.line.size="number"==typeof this.options.line.size?this.options.line.size:this.chart.line.size),"function"==typeof this.event.onCreate&&this.event.onCreate();for(var i=1;i<=this.chart.depth;i++)for(var s=this.chart.top+this.getDepthHeightToRoot(i),h=this.depthGroup[i].nodes,r=0;r<h.length;r++)h[r].node.top=s;for(var i=this.chart.depth;i>=1;i--){var d=this.depthGroup[i].nodes,p=d.length;if(i==this.chart.depth)for(var r=0;p>r;r++)0==r?d[r].node.left=0:d[r].node.left=d[r-1].node.left+d[r-1].node.offsetWidth+this.chart.intervalWidth;else{for(var r=0;p>r;r++){if(d[r].nodes.length>0){var f=d[r].nodes[0].node.left+this.getGroupWidth(d[r].nodes[0])/2;f-=d[r].node.offsetWidth/2,d[r].node.left=f}-1==d[r].node.left&&(this.chart.total.error.setNodeLeft=0,this.setNodeLeft(d,r,"LTR"))}for(var r=1;p>r;r++){var l=this.chart.intervalWidth-(d[r].node.left-d[r-1].node.left-d[r-1].node.offsetWidth);if(l>0){var a=r;for(a;p>a;a++)this.setNodeLeftAmend(d[a],l)}}}}this.setDepthGroupsWidth();for(var u=this.nodesDepths[0].node.left,c=this.nodesDepths.length,i=1;c>i;i++)u>this.nodesDepths[i].node.left&&(u=this.nodesDepths[i].node.left);u=-u+this.chart.left;for(var i=0;c>i;i++)this.nodesDepths[i].node.left+=u,"object"==typeof this.nodesDepths[i].node.instance&&null!==this.nodesDepths[i].node.instance&&(this.nodesDepths[i].node.instance.style.left=this.nodesDepths[i].node.left+"px",this.nodesDepths[i].node.instance.style.top=this.nodesDepths[i].node.top+"px"),this.nodesDepths[i].node.left>=this.chart.width&&(this.chart.width=this.nodesDepths[i].node.left),this.nodesDepths[i].node.top>=this.chart.height&&(this.chart.height=this.nodesDepths[i].node.top);this.chart.width+=this.chart.left+this.chart.intervalWidth,this.chart.height+=this.chart.top+this.chart.intervalHeight,1==this.options.expandTarget&&"object"==typeof o&&null!==o&&(o.style.width=this.chart.width+"px",o.style.height=this.chart.height+"px");for(var i=1;i<=this.chart.depth;i++)for(var d=this.depthGroup[i].nodes,r=0;r<d.length;r++){if(i!=this.chart.depth&&0!=d[r].nodes.length){var g=d[r].node.left+d[r].node.offsetWidth/2,y=(this.chart.intervalHeight-this.chart.line.size)/2;y+=this.depthGroup[i].depthHeight-d[r].node.offsetHeight;var m={id:"line-bottom-"+d[r].node.idt1,top:d[r].node.top+d[r].node.offsetHeight,left:g,longLength:y,size:this.chart.line.size,color:this.chart.line.color},v=this.drawLine(o,this.consts.line.type.self,m);d[r].node.line.bottom=v.instance}if(1!=i){var g=d[r].node.left+d[r].node.offsetWidth/2,y=(this.chart.intervalHeight-this.chart.line.size)/2;if(1==this.depthGroup[d[r].node.depth].nodeGroups[d[r].node.groupID].length){var N=parseFloat(d[r].node.parent.node.line.bottom.style.height)+this.chart.line.size;d[r].node.parent.node.line.bottom.style.height=y+N+"px"}else{var m={id:"line-top-"+d[r].node.idt1,top:d[r].node.top-y,left:g,longLength:y,size:this.chart.line.size,color:this.chart.line.color},b=this.drawLine(o,this.consts.line.type.self,m);d[r].node.parent.node.line.top=b.instance}}}for(var i=2;i<=this.chart.depth;i++)for(var G=this.depthGroup[i].nodeGroups,r=0;r<G.length;r++)if(1!=G[r].length){var W=G[r].depthGroupWidth-G[r][0].node.offsetWidth/2+this.chart.line.size;W-=G[r][G[r].length-1].node.offsetWidth/2;var L=G[r][0].node.top-(this.chart.intervalHeight-this.chart.line.size)/2-this.chart.line.size,g=G[r][0].node.left+G[r][0].node.offsetWidth/2,m={id:"line-group-"+G[r][0].node.idt1,top:L,left:g,longLength:W,size:this.chart.line.size,color:this.chart.line.color};this.drawLine(o,this.consts.line.type.group,m)}return"function"==typeof this.event.onFinish&&this.event.onFinish(),t},set:{depth:function(t){return OrgChartV2.prototype.setDepth(t)},depthWidth:function(){},depthGroupsWidth:function(){return OrgChartV2.prototype.setDepthGroupsWidth()},depthHeight:function(){return OrgChartV2.prototype.setDepthHeight()},nodeLeft:function(t,e,o){return OrgChartV2.prototype.setNodeLeft(t,e,o)},nodeLeftAmend:function(t,e){return OrgChartV2.prototype.setNodeLeftAmend(t,e)}},setDepth:function(t){if("object"==typeof t&&null!==t&&"object"==typeof t.node&&null!==t.node){if(this.nodesDepths[this.nodesDepths.length]=t,t.node.depth=0==this.chart.depth?this.chart.depth+1:t.node.parent.node.depth+1,this.chart.depth=t.node.depth>this.chart.depth?t.node.depth:this.chart.depth,"object"!=typeof this.depthGroup[t.node.depth]&&(this.depthGroup[t.node.depth]=[],this.depthGroup[t.node.depth].node=t.node,this.depthGroup[t.node.depth].nodes=[],this.depthGroup[t.node.depth].nodeGroups=[]),this.depthGroup[t.node.depth].nodes[this.depthGroup[t.node.depth].nodes.length]=t,1==t.node.depth)this.depthGroup[t.node.depth].nodeGroups[0]=[],this.depthGroup[t.node.depth].nodeGroups[0][0]=t,t.node.groupID=0,t.node.orderID=0;else if(0==this.depthGroup[t.node.depth].nodeGroups.length)this.depthGroup[t.node.depth].nodeGroups[0]=[],this.depthGroup[t.node.depth].nodeGroups[0][0]=t,t.node.groupID=0,t.node.orderID=0;else{var e=this.depthGroup[t.node.depth].nodeGroups.length,o=this.depthGroup[t.node.depth].nodeGroups[e-1].length;t.node.parent==this.depthGroup[t.node.depth].nodeGroups[e-1][o-1].node.parent?(this.depthGroup[t.node.depth].nodeGroups[e-1][o]=t,t.node.groupID=e-1,t.node.orderID=o):("object"!=typeof this.depthGroup[t.node.depth].nodeGroups[e]&&(this.depthGroup[t.node.depth].nodeGroups[e]=[]),o=this.depthGroup[t.node.depth].nodeGroups[e].length,this.depthGroup[t.node.depth].nodeGroups[e][o]=t,t.node.groupID=e,t.node.orderID=o)}if(t.nodes.length>0)for(var n=0;n<t.nodes.length;n++)this.setDepth(t.nodes[n])}},setDepthWidth:function(){},setDepthGroupsWidth:function(){for(var t=1;t<=this.chart.depth;t++)if("object"==typeof this.depthGroup[t]&&null!==this.depthGroup[t]&&"object"==typeof this.depthGroup[t].nodeGroups&&null!==this.depthGroup[t].nodeGroups)for(var e=this.depthGroup[t].nodeGroups,o=0;o<e.length;o++)e[o].depthGroupWidth=this.getGroupWidth(e[o][0])},setDepthHeight:function(){for(var t=1;t<=this.chart.depth;t++)if("object"==typeof this.depthGroup[t]&&null!==this.depthGroup[t]&&"object"==typeof this.depthGroup[t].nodes&&null!==this.depthGroup[t].nodes){for(var e=this.depthGroup[t].nodes,o=0,n=0;n<e.length;n++){var i=isNaN(e[n].node.offsetHeight)===!1&&null!==e[n].node.offsetHeight?e[n].node.offsetHeight:0;i>o&&(o=i)}this.depthGroup[t].depthHeight=o}},setNodeLeft:function(t,e,o){var n=!1;if(this.chart.total.error.setNodeLeft+=1,this.chart.total.error.setNodeLeft>this.chart.total.nodes)return!1;if(e==t.length-1&&"LTR"==o)return this.setNodeLeft(t,e,"RTL");if(0==e&&"RTL"==o)return this.setNodeLeft(t,e,"LTR");var i=!1;if("LTR"==o){var s=e+1;for(s;s<t.length;s++)if(-1!=t[s].node.left){i=s;break}if(i===!1)return this.setNodeLeft(t,e,"RTL");for(s=i-1;s>=e;s--)t[s].node.left=t[s+1].node.left-this.chart.intervalWidth-t[s].node.offsetWidth;n=!0}if("RTL"==o){var s=e-1;for(s;s>=0;s--){if(-1!=t[s].node.left){i=s;break}if(i===!1)return this.setNodeLeft(t,e,"LTR");for(s=i+1;e>=s;s++)t[s].node.left=t[s-1].node.left+this.chart.intervalWidth+t[s-1].node.offsetWidth}n=!0}return n},setNodeLeftAmend:function(t,e){if(t.node.left=t.node.left+e,0!=t.nodes.length)for(var o=t.nodes.length,n=0;o>n;n++)this.setNodeLeftAmend(t.nodes[n],e)},get:{consts:function(){return OrgChartV2.prototype.getConsts()},elementParents:function(t){return OrgChartV2.prototype.getElementParents(t)},elementOffsetParents:function(t){return OrgChartV2.prototype.getElementOffsetParents(t)},elementOffsetPosition:function(t){return OrgChartV2.prototype.getElementOffsetPosition(t)},firstLeftPosition:function(t){return OrgChartV2.prototype.getFirstLeftPosition(t)},nodesWidth:function(t){return OrgChartV2.prototype.getNodesWidth(t)},nodesDepth:function(t){return OrgChartV2.prototype.getNodesDepth(t)},groupWidth:function(t){return OrgChartV2.prototype.getGroupWidth(t)},depthHeightToRoot:function(t){return OrgChartV2.prototype.getDepthHeightToRoot(t)}},getConsts:function(){return this.consts},getElementParents:function(t){var e=[];if(t="string"==typeof t?document.getElementById(t):t,"object"==typeof t&&null!==t&&null!==t.nodeName&&null!==t.parentNode)for(var o=0;null!==t&&"string"==typeof t.nodeName;){t=t.parentNode;{if("HTML"==t.nodeName)break;e[o]=t,o+=1}}return e},getElementOffsetParents:function(t){var e={elements:[],offsetLeft:0,offsetTop:0};if(t="string"==typeof t&&""!=t?document.getElementById(t):t,"object"==typeof t&&null!==t&&null!==t.nodeName&&null!==t.parentNode)for(var o=0;null!==t&&"string"==typeof t.nodeName;){t=t.parentNode;{if("HTML"==t.nodeName)break;e.elements[o]={instance:t,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop},e.offsetLeft+=e.elements[o].offsetLeft,e.offsetTop+=e.elements[o].offsetTop,o+=1}}return e},getElementOffsetPosition:function(t){var e={offsetLeft:0,offsetTop:0};if(t="string"==typeof t&&""!=t?document.getElementById(t):t,"object"==typeof t&&null!==t&&isNaN(t.offsetLeft)===!1&&null!==t.offsetLeft&&isNaN(t.offsetTop)===!1&&null!==t.offsetTop){e.offsetLeft=t.offsetLeft,e.offsetTop=t.offsetTop;for(var o=t.offsetParent;null!==o||"undefined"==typeof o;)e.offsetLeft+=t.offsetLeft,e.offsetTop+=t.offsetTop,o=o.offsetParent}return e},getFirstLeftPosition:function(t){var e=0;if("object"==typeof t&&null!==t){var o=isNaN(t.node.left)===!1&&null!==t.node.left?t.node.left:0,n=0,i=isNaN(t.node.offsetWidth)===!1?t.node.offsetWidth:0;if(isNaN(t.node.orderID)===!0||0==t.node.orderID)e=o;else for(var s=0;s<=t.node.orderID;s++){var h=isNaN(t.node.depth)===!1&&null!==t.node.depth?t.node.depth:0,r=isNaN(t.node.groupID)===!1&&null!==t.node.groupID?t.node.groupID:0;if(0!=h&&0!=r&&"object"==typeof this.depthGroup[h]&&null!==this.depthGroup[h]){var d=this.depthGroup[h].nodeGroups[r][s],p=isNaN(d.node.offsetWidth)===!1&&null!==d.node.offsetWidth?d.node.offsetWidth:0;n+=p}}n+=t.node.orderID*this.chart.intervalWidth,e=o-n+i/2}return e},getNodesWidth:function(t){var e=0;if("object"==typeof t&&null!==t){var o=isNaN(this.options.node.width)===!1&&null!==this.options.node.width?this.options.node.width:0;isNaN(this.options.node.maxWidth)===!1&&(o>this.options.node.maxWidth||0>o)&&(o=this.options.node.maxWidth);for(var n=0;n<t.nodes.length;n++){var i=isNaN(t.nodes[n].node.offsetWidth)===!1&&null!==t.nodes[n].node.offsetWidth?t.nodes[n].node.offsetWidth:0,s=isNaN(t.nodes[n].options.width)===!1&&null!==t.nodes[n].options.width?t.nodes[n].options.width:0,h=isNaN(t.nodes[n].options.minWidth)===!1&&null!==t.nodes[n].options.minWidth?t.nodes[n].options.minWidth:0,r=isNaN(t.nodes[n].options.maxWidth)===!1&&null!==t.nodes[n].options.maxWidth?t.nodes[n].options.maxWidth:0,d=h>s||0>s?h:s;d=d>r||0>d?r:d,e+=i+d}}return e},getNodesDepth:function(t){},getGroupWidth:function(t){var e=0;if("object"==typeof t&&null!==t){var o=isNaN(t.node.depth)===!1&&null!==t.node.depth?t.node.depth:0,n=isNaN(t.node.groupID)===!1&&null!==t.node.groupID?t.node.groupID:0;if("object"==typeof this.depthGroup[o]&&null!==this.depthGroup[o]){var i=this.depthGroup[o].nodeGroups[n];e=i[i.length-1].node.left-i[0].node.left,e+=i[i.length-1].node.offsetWidth}}return e},getDepthHeightToRoot:function(t){var e=0,o=isNaN(t)===!1&&null!==t?t:0;for(o;o>=1;o--)"object"==typeof this.depthGroup[o]&&null!==this.depthGroup[o]&&(e+=this.depthGroup[o].depthHeight);return"object"==typeof this.depthGroup[t]&&null!==this.depthGroup[t]&&(e+=this.chart.intervalHeight*(t-1),e-=this.depthGroup[t].depthHeight),e},draw:{nodesInit:function(t,e,o){return OrgChartV2.prototype.drawNodesInit(t,e,o)},line:function(t,e,o){return OrgChartV2.prototype.drawLine(t,e,o)},getPx:function(t){return OrgChartV2.prototype.drawLineGetPx(t)}},drawNodesInit:function(t,e,o,n){var i=!1;if("object"==typeof t&&null!==t){t.render(e,o,n);if(this.chart.total.nodes+=1,1==this.chart.total.nodes&&(this.chart.targetName=t.options.targetName,this.chart.subTargetName=t.options.subTargetName,this.chart.clsName=t.options.clsName),t.nodes.length>0)for(var s=0;s<t.nodes.length;s++){this.drawNodesInit(t.nodes[s],e,o,n)}i=!0}return i},drawLine:function(t,e,o){var n={id:"",instance:null,top:"",left:"",longLength:"",size:"1px",color:"#000000"};return"object"==typeof o&&null!==o&&(n.id="string"==typeof o.id?o.id:n.id,n.top="string"==typeof o.top||"number"==typeof o.top?this.drawLineGetPx(o.top):n.top,n.left="string"==typeof o.left||"number"==typeof o.left?this.drawLineGetPx(o.left):n.left,n.longLength="string"==typeof o.longLength||"number"==typeof o.longLength?this.drawLineGetPx(o.longLength):n.longLength,n.size="string"==typeof o.size||"number"==typeof o.size?this.drawLineGetPx(o.size):n.size,n.color="string"==typeof o.color?o.color:n.color,n.instance=document.createElement("div"),n.instance.id=n.id,n.instance.innerText=".",n.instance.style.position="absolute",n.instance.style.top=n.top+"px",n.instance.style.left=n.left+"px",n.instance.style.overflow="hidden",e==this.consts.line.type.group?(n.instance.style.borderTopColor=n.color,n.instance.style.borderTopWidth=n.size+"px",n.instance.style.borderTopStyle="solid",n.instance.style.width=n.longLength+"px",n.instance.style.height="0px"):(n.instance.style.borderLeftColor=n.color,n.instance.style.borderLeftWidth=n.size+"px",n.instance.style.borderLeftStyle="solid",n.instance.style.height=n.longLength+"px",n.instance.style.width="0px"),t="object"==typeof t&&null!==t?t:document.body,t.appendChild(n.instance)),n},drawLineGetPx:function(t){return"string"==typeof t&&"px"!=t.substr(t.length-2).toLowerCase()?t+"px":t}};
